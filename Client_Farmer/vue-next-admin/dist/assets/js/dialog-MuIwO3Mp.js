const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CvF2Lo-a.js","./index-uJp-ZfSa.js",".store-DdqHRk86.js","../css/.store-DbUK_3gL.css","../css/index-TDrV2aGq.css","../css/index-B9s4Ea2a.css"])))=>i.map(i=>d[i]);
import{l as J,m as K,_ as G}from"./index-uJp-ZfSa.js";import{l as w,r as $,s as j,M as q,w as Q,A as r,O as _,C as b,H as l,D as o,G as V,B as W,P as U,T as g,S as s,$ as D,J as X,k as Y}from"./.store-DdqHRk86.js";const Z={class:"system-menu-dialog-container"},h={key:0},ee={class:"dialog-footer"},le=w({name:"systemMenuDialog"}),me=w({...le,emits:["refresh"],setup(oe,{expose:T,emit:c}){const L=c,A=Y(()=>G(()=>import("./index-CvF2Lo-a.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),C=$(),v=J(),{routesList:I}=j(v),a=q({ruleForm:{menuSuperior:[],menuType:"menu",name:"",component:"",componentAlias:"",isLink:!1,menuSort:0,path:"",redirect:"",meta:{title:"",icon:"",isHide:!1,isKeepAlive:!0,isAffix:!1,isLink:"",isIframe:!1,roles:""},btnPower:""},menuData:[],dialog:{isShowDialog:!1,type:"",title:"",submitTxt:""}}),x=p=>{const e=[];return p.map(n=>{var m;n.title=K.global.t((m=n.meta)==null?void 0:m.title),e.push({...n}),n.children&&x(n.children)}),e},M=(p,e)=>{p==="edit"?(e.menuType="menu",e.menuSort=Math.floor(Math.random()*100),a.ruleForm=JSON.parse(JSON.stringify(e)),a.dialog.title="修改菜单",a.dialog.submitTxt="修 改"):(a.dialog.title="新增菜单",a.dialog.submitTxt="新 增"),a.dialog.type=p,a.dialog.isShowDialog=!0},F=()=>{a.dialog.isShowDialog=!1},N=()=>{a.ruleForm.meta.isIframe?a.ruleForm.isLink=!0:a.ruleForm.isLink=!1},P=()=>{F()},B=()=>{F(),L("refresh")};return Q(()=>{a.menuData=x(I.value)}),T({openDialog:M}),(p,e)=>{const n=r("el-cascader"),m=r("el-form-item"),u=r("el-col"),d=r("el-radio"),f=r("el-radio-group"),i=r("el-input"),k=r("el-option"),R=r("el-select"),H=r("el-input-number"),O=r("el-row"),z=r("el-form"),y=r("el-button"),E=r("el-dialog");return b(),_("div",Z,[l(E,{title:a.dialog.title,modelValue:a.dialog.isShowDialog,"onUpdate:modelValue":e[17]||(e[17]=t=>a.dialog.isShowDialog=t),width:"769px"},{footer:o(()=>[U("span",ee,[l(y,{onClick:P,size:"default"},{default:o(()=>[...e[30]||(e[30]=[s("取 消",-1)])]),_:1}),l(y,{type:"primary",onClick:B,size:"default"},{default:o(()=>[s(g(a.dialog.submitTxt),1)]),_:1})])]),default:o(()=>[l(z,{ref_key:"menuDialogFormRef",ref:C,model:a.ruleForm,size:"default","label-width":"80px"},{default:o(()=>[l(O,{gutter:35},{default:o(()=>[l(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(m,{label:"上级菜单"},{default:o(()=>[l(n,{options:a.menuData,props:{checkStrictly:!0,value:"path",label:"title"},placeholder:"请选择上级菜单",clearable:"",class:"w100",modelValue:a.ruleForm.menuSuperior,"onUpdate:modelValue":e[0]||(e[0]=t=>a.ruleForm.menuSuperior=t)},{default:o(({node:t,data:S})=>[U("span",null,g(S.title),1),t.isLeaf?V("",!0):(b(),_("span",h," ("+g(S.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(m,{label:"菜单类型"},{default:o(()=>[l(f,{modelValue:a.ruleForm.menuType,"onUpdate:modelValue":e[1]||(e[1]=t=>a.ruleForm.menuType=t)},{default:o(()=>[l(d,{label:"menu"},{default:o(()=>[...e[18]||(e[18]=[s("菜单",-1)])]),_:1}),l(d,{label:"btn"},{default:o(()=>[...e[19]||(e[19]=[s("按钮",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"菜单名称"},{default:o(()=>[l(i,{modelValue:a.ruleForm.meta.title,"onUpdate:modelValue":e[2]||(e[2]=t=>a.ruleForm.meta.title=t),placeholder:"格式：message.router.xxx",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a.ruleForm.menuType==="menu"?(b(),_(D,{key:0},[l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"路由名称"},{default:o(()=>[l(i,{modelValue:a.ruleForm.name,"onUpdate:modelValue":e[3]||(e[3]=t=>a.ruleForm.name=t),placeholder:"路由中的 name 值",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"路由路径"},{default:o(()=>[l(i,{modelValue:a.ruleForm.path,"onUpdate:modelValue":e[4]||(e[4]=t=>a.ruleForm.path=t),placeholder:"路由中的 path 值",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"重定向"},{default:o(()=>[l(i,{modelValue:a.ruleForm.redirect,"onUpdate:modelValue":e[5]||(e[5]=t=>a.ruleForm.redirect=t),placeholder:"请输入路由重定向",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"菜单图标"},{default:o(()=>[l(X(A),{placeholder:"请输入菜单图标",modelValue:a.ruleForm.meta.icon,"onUpdate:modelValue":e[6]||(e[6]=t=>a.ruleForm.meta.icon=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"组件路径"},{default:o(()=>[l(i,{modelValue:a.ruleForm.componentAlias,"onUpdate:modelValue":e[7]||(e[7]=t=>a.ruleForm.componentAlias=t),placeholder:"组件路径",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"链接地址"},{default:o(()=>[l(i,{modelValue:a.ruleForm.meta.isLink,"onUpdate:modelValue":e[8]||(e[8]=t=>a.ruleForm.meta.isLink=t),placeholder:"外链/内嵌时链接地址（http:xxx.com）",clearable:"",disabled:!a.ruleForm.isLink},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"权限标识"},{default:o(()=>[l(R,{modelValue:a.ruleForm.meta.roles,"onUpdate:modelValue":e[9]||(e[9]=t=>a.ruleForm.meta.roles=t),multiple:"",placeholder:"取角色管理",clearable:"",class:"w100"},{default:o(()=>[l(k,{label:"admin",value:"admin"}),l(k,{label:"common",value:"common"})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)):V("",!0),a.ruleForm.menuType==="btn"?(b(),W(u,{key:1,xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"权限标识"},{default:o(()=>[l(i,{modelValue:a.ruleForm.btnPower,"onUpdate:modelValue":e[10]||(e[10]=t=>a.ruleForm.btnPower=t),placeholder:"请输入权限标识",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):V("",!0),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"菜单排序"},{default:o(()=>[l(H,{modelValue:a.ruleForm.menuSort,"onUpdate:modelValue":e[11]||(e[11]=t=>a.ruleForm.menuSort=t),"controls-position":"right",placeholder:"请输入排序",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),a.ruleForm.menuType==="menu"?(b(),_(D,{key:2},[l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"是否隐藏"},{default:o(()=>[l(f,{modelValue:a.ruleForm.meta.isHide,"onUpdate:modelValue":e[12]||(e[12]=t=>a.ruleForm.meta.isHide=t)},{default:o(()=>[l(d,{label:!0},{default:o(()=>[...e[20]||(e[20]=[s("隐藏",-1)])]),_:1}),l(d,{label:!1},{default:o(()=>[...e[21]||(e[21]=[s("不隐藏",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"页面缓存"},{default:o(()=>[l(f,{modelValue:a.ruleForm.meta.isKeepAlive,"onUpdate:modelValue":e[13]||(e[13]=t=>a.ruleForm.meta.isKeepAlive=t)},{default:o(()=>[l(d,{label:!0},{default:o(()=>[...e[22]||(e[22]=[s("缓存",-1)])]),_:1}),l(d,{label:!1},{default:o(()=>[...e[23]||(e[23]=[s("不缓存",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"是否固定"},{default:o(()=>[l(f,{modelValue:a.ruleForm.meta.isAffix,"onUpdate:modelValue":e[14]||(e[14]=t=>a.ruleForm.meta.isAffix=t)},{default:o(()=>[l(d,{label:!0},{default:o(()=>[...e[24]||(e[24]=[s("固定",-1)])]),_:1}),l(d,{label:!1},{default:o(()=>[...e[25]||(e[25]=[s("不固定",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"是否外链"},{default:o(()=>[l(f,{modelValue:a.ruleForm.isLink,"onUpdate:modelValue":e[15]||(e[15]=t=>a.ruleForm.isLink=t),disabled:a.ruleForm.meta.isIframe},{default:o(()=>[l(d,{label:!0},{default:o(()=>[...e[26]||(e[26]=[s("是",-1)])]),_:1}),l(d,{label:!1},{default:o(()=>[...e[27]||(e[27]=[s("否",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"是否内嵌"},{default:o(()=>[l(f,{modelValue:a.ruleForm.meta.isIframe,"onUpdate:modelValue":e[16]||(e[16]=t=>a.ruleForm.meta.isIframe=t),onChange:N},{default:o(()=>[l(d,{label:!0},{default:o(()=>[...e[28]||(e[28]=[s("是",-1)])]),_:1}),l(d,{label:!1},{default:o(()=>[...e[29]||(e[29]=[s("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)):V("",!0)]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}});export{me as default};
