import{l as P,r as b,p as v,y as B,w as L,x as O,A as z,O as o,C as r,X as A,P as u,G as p,H as s,D as n,J as f,a6 as m,F as D,a7 as G,I as N,a8 as M,$ as x,a0 as E,Q as F}from"./.store-DdqHRk86.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={key:0,class:"carousel-wrapper"},W={class:"main-image-container"},X={class:"image-error-slot"},j={key:0,class:"carousel-controls"},q={key:1,class:"carousel-indicators"},K=["onClick"],Y={key:0,class:"thumbnail-list"},Z=["onClick"],ee={class:"thumbnail-error"},ae={key:1,class:"no-image-placeholder"},te=P({name:"ImageCarousel"}),le=P({...te,props:{images:{default:()=>[]},width:{default:"100px"},height:{default:"100px"},fit:{default:"cover"},borderRadius:{default:"4px"},showControls:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!1},showThumbnails:{type:Boolean,default:!1},showPreview:{type:Boolean,default:!0},autoplay:{type:Boolean,default:!1},autoplayDelay:{default:3e3},infinite:{type:Boolean,default:!1}},setup(R){const a=R,l=b(0),h=b(null),S=v(()=>a.width),T=v(()=>a.height),V=v(()=>a.fit),t=v(()=>{if(!a.images)return[];if(Array.isArray(a.images))return a.images.filter(e=>e&&e.trim());if(typeof a.images=="string")try{const e=JSON.parse(a.images);return Array.isArray(e)?e.filter(c=>c&&c.trim()):[]}catch{return a.images.split(",").map(e=>e.trim()).filter(e=>e)}return[]}),g=v(()=>t.value[l.value]||""),_=e=>{e>=0&&e<t.value.length&&(l.value=e)},$=()=>{l.value>0?l.value--:a.infinite&&t.value.length>1&&(l.value=t.value.length-1)},y=()=>{l.value<t.value.length-1?l.value++:a.infinite&&t.value.length>1&&(l.value=0)},H=()=>{console.warn("图片加载失败:",g.value)},w=()=>{a.autoplay&&t.value.length>1&&(h.value=setInterval(()=>{y()},a.autoplayDelay))},C=()=>{h.value&&(clearInterval(h.value),h.value=null)};return B(()=>a.images,()=>{l.value=0},{deep:!0}),B(()=>a.autoplay,e=>{e?w():C()}),L(()=>{a.autoplay&&w()}),O(()=>{C()}),(e,c)=>{const d=z("el-icon"),k=z("el-image");return r(),o("div",{class:"image-carousel-container",style:A({width:S.value,height:T.value})},[t.value.length>0?(r(),o("div",U,[u("div",W,[s(k,{src:g.value,"preview-src-list":e.showPreview?t.value:[],fit:V.value,style:A({width:"100%",height:"100%",borderRadius:e.borderRadius}),"hide-on-click-modal":!0,class:"main-image",onError:H},{error:n(()=>[u("div",X,[s(d,{size:"20px",color:"#c0c4cc"},{default:n(()=>[s(f(m))]),_:1})])]),_:1},8,["src","preview-src-list","fit","style"]),t.value.length>1&&e.showControls?(r(),o("div",j,[D(u("div",{class:"control-btn prev-btn",onClick:$},[s(d,{size:"14px"},{default:n(()=>[s(f(G))]),_:1})],512),[[N,l.value>0||e.infinite]]),D(u("div",{class:"control-btn next-btn",onClick:y},[s(d,{size:"14px"},{default:n(()=>[s(f(M))]),_:1})],512),[[N,l.value<t.value.length-1||e.infinite]])])):p("",!0),t.value.length>1&&e.showIndicators?(r(),o("div",q,[(r(!0),o(x,null,E(t.value,(I,i)=>(r(),o("span",{key:i,class:F(["indicator",{active:i===l.value}]),onClick:J=>_(i)},null,10,K))),128))])):p("",!0)]),e.showThumbnails&&t.value.length>1?(r(),o("div",Y,[(r(!0),o(x,null,E(t.value,(I,i)=>(r(),o("div",{key:i,class:F(["thumbnail-item",{active:i===l.value}]),onClick:J=>_(i)},[s(k,{src:I,fit:"cover",style:{width:"100%",height:"100%"}},{error:n(()=>[u("div",ee,[s(d,{size:"12px"},{default:n(()=>[s(f(m))]),_:1})])]),_:2},1032,["src"])],10,Z))),128))])):p("",!0)])):(r(),o("div",ae,[s(d,{size:"30px",color:"#c0c4cc"},{default:n(()=>[s(f(m))]),_:1}),c[0]||(c[0]=u("span",null,"暂无图片",-1))]))],4)}}}),re=Q(le,[["__scopeId","data-v-5d6dcff4"]]);export{re as I};
