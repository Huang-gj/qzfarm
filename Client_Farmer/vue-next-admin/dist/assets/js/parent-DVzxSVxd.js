const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./iframes-eRurTZC5.js",".store-DdqHRk86.js","../css/.store-DbUK_3gL.css"])))=>i.map(i=>d[i]);
import{c as C,u as I,e as p,S as x,_ as B}from"./index-mLlbfZu9.js";import{l as K,u as P,Z as D,s as h,M as E,p as m,t as M,n as _,w as O,x as S,y as U,A as F,O as H,C as l,H as o,D as f,W as d,B as w,a4 as J,F as R,Y as W,I as y,J as Y,k as Z}from"./.store-DdqHRk86.js";const b={class:"layout-parent"},j=K({name:"layoutParentView"}),Q=K({...j,setup(q){const V=Z(()=>B(()=>import("./iframes-eRurTZC5.js"),__vite__mapDeps([0,1,2]),import.meta.url)),t=P(),g=D(),A=C(),k=I(),{keepAliveNames:r,cachedViews:c}=h(A),{themeConfig:n}=h(k),e=E({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),u=m(()=>n.value.animation),L=m(()=>n.value.isTagsview?c.value:e.keepAliveNameList),v=m(()=>t.meta.isIframe),T=async()=>{g.getRoutes().forEach(s=>{s.meta.isIframe&&(s.meta.isIframeOpen=!1,s.meta.loading=!0,e.iframeList.push({...s}))})};return M(()=>{e.keepAliveNameList=r.value,p.on("onTagsViewRefreshRouterView",s=>{e.keepAliveNameList=r.value.filter(a=>t.name!==a),e.refreshRouterViewKey="",e.iframeRefreshKey="",_(()=>{e.refreshRouterViewKey=s,e.iframeRefreshKey=s,e.keepAliveNameList=r.value})})}),O(()=>{T(),_(()=>{setTimeout(()=>{if(n.value.isCacheTagsView){let s=x.get("tagsViewList")||[];c.value=s.filter(a=>{var i;return(i=a.meta)==null?void 0:i.isKeepAlive}).map(a=>a.name)}},0)})}),S(()=>{p.off("onTagsViewRefreshRouterView",()=>{})}),U(()=>t.fullPath,()=>{e.refreshRouterViewKey=decodeURI(t.fullPath)},{immediate:!0}),(s,a)=>{const i=F("router-view");return l(),H("div",b,[o(i,null,{default:f(({Component:N})=>[o(d,{name:u.value,mode:"out-in"},{default:f(()=>[(l(),w(J,{include:L.value},[R((l(),w(W(N),{key:e.refreshRouterViewKey,class:"w100"})),[[y,!v.value]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),o(d,{name:u.value,mode:"out-in"},{default:f(()=>[R(o(Y(V),{class:"w100",refreshKey:e.iframeRefreshKey,name:u.value,list:e.iframeList},null,8,["refreshKey","name","list"]),[[y,v.value]])]),_:1},8,["name"])])}}});export{Q as default};
